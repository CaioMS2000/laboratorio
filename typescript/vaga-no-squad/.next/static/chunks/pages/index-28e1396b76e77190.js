(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1935)}])},1935:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(5893),o=n(9008),c=n.n(o),r=n(9854),s=n.n(r),i=n(7294),l=n(9583);async function u(e){await fetch("/api/users?name=".concat(e),{method:"DELETE"})}async function d(e){let{name:t,rounds:n}=e,a=await fetch("/api/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,rounds:n})});await a.json()}async function m(e){let{name:t,rounds:n}=e,a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,rounds:n})});await a.json()}let f=e=>{let{user:t,fetchUsers:n}=e,{name:o,rounds:c,"action-icon":r,minus:m,plus:f}=s(),[h,p]=(0,i.useState)(1),[_,j]=(0,i.useState)(!0);async function v(){let e=t.rounds+1;p(e),await d({name:t.name,rounds:e}),n()}async function x(){let e=t.rounds-1;e<=0?(j(!1),await u(t.name)):(j(!0),await d({name:t.name,rounds:e}),p(e)),n()}return((0,i.useEffect)(()=>{p(t.rounds)},[]),_)?(0,a.jsxs)("div",{className:"user-row row",children:[(0,a.jsx)("div",{className:"col-8 ".concat(o," name"),children:t.name}),(0,a.jsx)("div",{className:"col-2 ".concat(c," rounds"),children:h}),(0,a.jsx)("div",{className:"col-1 ".concat(r," ").concat(f," action-icon"),style:{cursor:"pointer"},onClick:()=>{v()},children:(0,a.jsx)(l.wEH,{})}),(0,a.jsx)("div",{className:"col-1 ".concat(r," ").concat(m," action-icon"),style:{cursor:"pointer"},onClick:()=>{x()},children:(0,a.jsx)(l.iFH,{})})]}):null};var h=n(7312);let p=()=>{var e;let{"add-button":t}=s(),{creatingPlayer:n,setCreatingPlayer:o}=null!==(e=(0,i.useContext)(h.E))&&void 0!==e?e:{};return(0,a.jsx)("div",{className:"".concat(t),onClick:()=>{o&&o(e=>!e)},children:"Adicionar novo jogador"})},_=e=>{var t;let{fetchUsers:n}=e,{form:o}=s(),[c,r]=(0,i.useState)(0),[l,u]=(0,i.useState)(""),{creatingPlayer:d,setCreatingPlayer:f}=null!==(t=(0,i.useContext)(h.E))&&void 0!==t?t:{};async function p(e){e.preventDefault();let t={name:l,rounds:c};f&&f(e=>!e),await m({name:t.name,rounds:t.rounds}),r(0),u(""),n()}return(0,i.useEffect)(()=>{n()},[l,c]),(0,a.jsxs)("form",{className:"".concat(o),onSubmit:p,children:[(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{id:"name",type:"text",className:"form-control",placeholder:"nome...",value:l,onChange:e=>{u(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{id:"rounds",type:"number",className:"form-control",placeholder:"0",onChange:e=>{r(+e.target.value)}})}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"CRIAR"})]})};function j(){var e;let{h1:t,"page-content":n,name:o,rounds:r,main:l,"bordered-row":u,head:d}=s(),[m,j]=(0,i.useState)([]),{creatingPlayer:v,setCreatingPlayer:x}=null!==(e=(0,i.useContext)(h.E))&&void 0!==e?e:{};async function y(){let e=await fetch("/api/users"),t=await e.json();j(t)}return(0,i.useEffect)(()=>{y()},[]),(0,i.useEffect)(()=>{j(m)},[m]),(0,a.jsxs)("div",{className:n,children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Comp do LOL"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/toplane.png"})]}),(0,a.jsx)("h1",{className:"".concat(t," text-center"),children:"CONTROLE DE VAGAS"}),(0,a.jsxs)("main",{className:"container-fluid ".concat(l),children:[(0,a.jsx)("div",{id:"add-form",className:"row d-flex justify-content-center",children:(0,a.jsx)("div",{className:"col-5 d-flex justify-content-center",children:v?(0,a.jsx)(_,{fetchUsers:y}):(0,a.jsx)(p,{})})}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsxs)("div",{id:"players-grid",className:"container-sm",children:[(0,a.jsxs)("div",{className:"row head ".concat(d," ").concat(u),children:[(0,a.jsx)("div",{className:"col-8 ".concat(o," name"),children:"Nick"}),(0,a.jsx)("div",{className:"col-4 ".concat(r," rounds"),children:"Vagas"})]}),m.map((e,t)=>e.rounds>0?(0,a.jsx)(f,{user:e,fetchUsers:y},t):null)]})})})]})]})}},9854:function(e){e.exports={"page-content":"Home_page-content__d8m33",h1:"Home_h1__Xpuf9",main:"Home_main__EtNt2","add-button":"Home_add-button__Chlc0",form:"Home_form__jRaFR","form-group":"Home_form-group__QPEfO",name:"Home_name__trrU6",rounds:"Home_rounds__ZOafd",head:"Home_head__3n36g","action-icon":"Home_action-icon__Ozgwz",minus:"Home_minus__JFUZh",plus:"Home_plus__Zmkb4"}},9008:function(e,t,n){e.exports=n(2636)},8357:function(e,t,n){"use strict";n.d(t,{w_:function(){return i}});var a=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=a.createContext&&a.createContext(o),r=function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)0>t.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n};function i(e){return function(t){return a.createElement(l,r({attr:r({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return a.createElement(t.tag,r({key:n},t.attr),e(t.child))})}(e.child))}}function l(e){var t=function(t){var n,o=e.attr,c=e.size,i=e.title,l=s(e,["attr","size","title"]),u=c||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,l,{className:n,style:r(r({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==c?a.createElement(c.Consumer,null,function(e){return t(e)}):t(o)}}},function(e){e.O(0,[445,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);